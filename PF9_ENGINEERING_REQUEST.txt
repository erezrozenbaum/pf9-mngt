PF9 ENGINEERING SUPPORT REQUEST
================================

ISSUE: Libvirt Exporters Cannot Connect to Libvirt Daemon - VM Metrics Unavailable

ENVIRONMENT:
- PF9 Compute Nodes: 172.17.95.2, 172.17.95.3, 172.17.95.4, 172.17.95.5
- Node Exporter: Working (port 9388) ✓
- Libvirt Exporter: Not working (port 9177) ❌

SYMPTOMS:
1. Libvirt exporters are running on port 9177 on all compute nodes
2. HTTP requests to http://<host>:9177/metrics return data
3. But libvirt_up metric shows 0 (should be 1)
4. No libvirt_domain_* metrics are present
5. Libvirt version info shows: hypervisor_running="8.2.2",libvirt_library="10.0.0",libvirtd_running="10.0.0"

CURL TEST RESULTS:
curl http://172.17.95.2:9177/metrics | grep "libvirt_up"
Returns: libvirt_up 0

ROOT CAUSE:
The libvirt exporters cannot establish connection to the libvirtd daemon.

REQUIRED FIXES:
1. Verify libvirtd daemon is running: systemctl status libvirtd
2. Check libvirt exporter service logs: journalctl -u <libvirt-exporter-service>
3. Verify permissions: libvirt exporter user needs access to libvirt socket
4. Check socket permissions: ls -la /var/run/libvirt/libvirt-sock*
5. Possible fix: Add exporter user to libvirt group: usermod -a -G libvirt <exporter-user>
6. Restart services: systemctl restart libvirtd && systemctl restart <libvirt-exporter>

VERIFICATION TEST:
After fixes, this command should return "libvirt_up 1":
curl http://<compute-node-ip>:9177/metrics | grep libvirt_up

IMPACT:
- Host-level monitoring works perfectly ✓
- VM-level resource monitoring unavailable ❌
- Cannot track individual VM CPU, memory, storage usage
- Cannot perform VM capacity planning

BUSINESS VALUE OF FIX:
VM metrics enable:
- Individual VM resource optimization
- Right-sizing recommendations  
- VM sprawl monitoring
- Chargeback/showback reporting
- Capacity planning at VM level